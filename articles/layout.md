---
title: 浅谈CSS布局
date: 2013-10-30 20:02:41
categories:
- CSS
tags:
- 布局
---

网上充斥着各种布局手段，探寻建立一个优美、普遍适应的布局的过程其实可以归结为对现存的各种方法的比较改进。这个过程还会极大的受到设计师的艺术素养，以及在像素级、自适应、灵活性布局间选择的影响。根据能否从用户浏览器尺寸的不同中调查自身尺寸来分，有这样几种类型：固定宽度布局、自适应布局、弹性布局和混合布局。

<!--more-->

## 固定宽度布局
固定宽度布局以像素为单位，布局的外层宽度是固定的，内部使用了百分比或者固定的宽度。同时对内容区域中周围的元素有相当的控制力，可以精确的设定某一区域块的宽度。下面来看一个简单的两栏布局
### HTML代码部分

    < div class="wrapper">
    	<header>
    		<!--头部-->
    	</header>
    	<article>
    		<section class="section-body">
    			<!-- 内容区域 -->
    		</section>
    		<aside>
    			<!-- 边栏 -->
    		</aside>
    	</article>
    	<footer>
    		<!-- 底部 -->
    	</footer>
    </div>

### CSS代码部分

    .wrapper{
        width: 960px;/*固定宽度为960像素*/
    	margin: 0 auto;	/*居中显示，从而在大屏中找到一丝平衡感*/		
    }
    header{
    	width: 100%;
    	height: 100px;
    }
    .section-body{
    	width: 600px;
    	float: left;/*左浮动*/
    }
    aside{
    	width: 330px;
    	float: right;/*右浮动*/
    }
    footer{
     	width: 100%;
     	clear: both;/*确保底部显示在两个浮动的栏目下方*/
    }

上述只是一个框架，可以看出其简洁、直观、易于实现和定制的特性吧。也正因为这个它成为了比较流行的布局方式。固定布局可以确保在不同分辨率下的设计效果保持一致。不用去猜测用户用的什么客户端，测试也变得简单，从而总体上缩短了开发时间。
固定宽度布局的缺点也是不可回避的，由于对不同的客户端“一视同仁”导致最直接的问题就是在不同客户端下的浏览性能完全失去了平衡。而且看似是缩短了开发时间但是从长远看来，**代码维护**的困难度其实悄然升级。如果某一天客户要求改变某个区域块的尺寸，这将导致一连锁的尺寸计算，结果是熬夜，熬夜，熬夜···     

## 自适应布局
一个比较好的方法应当是使用元素之间的比例关系来决定设计的尺寸，这种会根据网页浏览器的窗口大小相应地调整自己宽度的布局方式就是自适应布局。这类不居中，容器中的主体部分的宽度以当前浏览器的窗口宽度为基准，按照一定的百分比进行定义。值得注意的是布局元素之间的关系至关重要，因为布局中子元素的宽度是以父元素的百分比设置的。例如父容器的宽度设置为76%，导航区的宽度为80%，那么导航区的宽度就是浏览器宽度的60.8%（1*0.76*0.8）。可以看得出过程并不轻松，当看到网站可以灵活的面对使用不同终端的用户时或许会轻松不少。
### CSS代码实现

    .wrapper{
        width: 76%;
    	margin: 0 auto;	/*居中显示，从而在大屏中找到一丝平衡感*/		
    }
    header{
    	width: 100%;
    }
    .section-body{
    	width: 60%x;
    	float: left;/*左浮动*/
    }
    aside{
    	width: 40%;
    	float: right;/*右浮动*/
    }
    footer{
    	width: 100%;
    	clear: both;/*确保底部显示在两个浮动的栏目下方*/
    }

在相对值替换绝对值得过程中，经常将这些值进位或去位（例如：33.33333%会变成33.3%或者33%）这样布局就会变得更加不确定。事实上，内容区域过宽的结果是流式布局最显著的缺点。由于内容区域的宽度取决于用户视窗的大小，宽屏的用户会发现每一行是如此的长，以至于浏览感官大幅度下降。ps：每行47~86个英文字母阅读效果较佳。    

## 动态网格布局
动态网格布局最早由Ethan Marcotte提出。本质上，通过合理的使用DIV层、百分比和一些简单的**数学运算**就可以建立一个自适应网格布局。Eathan指出
> “这种方法允许将基于像素的固定宽度布局转换为基于百分比的布局，同时在缩放时保持各个网格之间的关系。”

一个经典的计算这个比例关系的方法是，通过将给定像素高度元素与容器的尺寸相除得到字体大小。公式：**目标/环境 = 结果**。举个示例下面我们创建一个960像素，等分为7个100像素宽、之间有20像素分割的固定宽度布局。
假设现在布局中有一个580像素宽的导航块（他横跨了5个列和4个空槽：5 * 100 + 4 * 20 = 580）这个导航区居中显示（margin-left: 120px;）。现在开始转换为相对单位，580像素与960像素相除，得到580/960 = 60.42%(近似)，左边距：120/960 = 12.5%。
### CSS代码实现

    header{
        width: 60.42%
        margin-left: 12.5%;
    }

我们在网上会看到很多比较优秀的动态网格布局框架，都是设计师，前端工程师的努力成果学习一下也是有好处的。相信学习之后你也会有自己的网格布局的。    

## 弹性布局
讲到弹性布局，在我看来就是“能屈能伸”。CSS3引入了让布局简单的弹性盒子模型。
### HTML代码部分

    <header>
    	<div class="list list-1">1</div>
    	<div class="list list-2">2</div>
    	<div class="list list-3">3</div>
    </header>

### CSS代码部分

    header{
    	display: -moz-box;/*for Firefox*/
    	display: -webkit-box;/*for Safari and Chrome*/
    	display: -ms-flexbox;/*for IE10*/
    	display: box;
    	width: 75%;
    	margin: 2em auto;
    	padding: 2em;
    	background: #eee;
    }
    .list{
    	padding: 0 1em;
    	font:italic bold 32px/200px serif;
    	color: white;
    }
    .list-1{
    	-moz-box-flex: 1.0;/*for Firefox*/
    	-webkit-box-flex: 1.0;/*for Safari and Chrome*/
    	-ms-flex: 1.0;/*for IE10*/
    	box-flex: 1.0;
    	background: red;	
    }
    .list-2{
    	-moz-box-flex: 2.0;/*for Firefox*/
    	-webkit-box-flex: 2.0;/*for Safari and Chrome*/
    	-ms-flex: 2.0;/*for IE10*/
    	box-flex: 2.0;
    	background: yellow;
    }
    .list-3{
    	-moz-box-flex: 3.0;/*for Firefox*/
    	-webkit-box-flex: 3.0;/*for Safari and Chrome*/
    	-ms-flex: 3.0;/*for IE10*/
    	box-flex: 3.0;
    	background: blue;
    }

开始使用可伸缩布局
- 首先给想排列的元素的父元素容器上使用`display: box-flex;`
- 通过box-orient来确定子元素的方向，
    - 默认水平方向；
    - box-algin来分配盒子内部剩余空间,
    - 默认为strentch可伸缩；
    - box-direction用来确定子元素的排列顺序；
    - box-pack用来分配父容器水平空间；
    - box-lines用来决定子元素是否可换行显示；
    - box-ordinal-group可以改变元素的排列顺序。
- 在该代码示例中均取默认值。有兴趣想了解各属性详细信息，移步:[W3SCHOOLS](http://www.w3schools.com/cssref/css3_pr_box-flex.asp)

从上面简单的示例也可以看出，弹性布局的优点不言而喻，同时其短板就是：该布局是一个全新的布局，不支持的浏览器会直接忽视，这回一定程度上阻碍了其流行。

## 响应式布局
估计近来风头正猛的响应式布局的名号早已传遍大江南北。如何设计出响应式页面？首先，搜集要兼容的设备类型、屏幕尺寸；根据设备类型、屏幕尺寸对页面布局的变化、内容尺寸的缩放制作布局（保持风格一致）；然后是保证网页的可读性、交互性不受设备变更的影响（优先考虑移动设备）；最后是前端实现。

### 优点
- 面对不同分辨率设备灵活性强
- 能够快捷解决多设备显示适应问题

### 缺点
- 兼容各种设备工作量大，效率低下
- 代码累赘，会出现隐藏无用的元素，加载时间加长
- 其实这是一种折衷性质的设计解决方案，多方面因素影响而达不到最佳效果
- 一定程度上改变了网站原有的布局结构，会出现用户混淆的情况 

### 了解响应式设计中的基础知识
CSS3中media query给响应式布局提供了强大的语法支持。通过不同的媒体类型和条件定义样式表规则。媒体查询让CSS可以更精确作用于不同的媒体类型和同一媒体的不同条件。媒体查询的大部分媒体特性都接受min和max用于表达”大于或等于”和”小与或等于”。如：width会有min-width和max-width媒体查询可以被用在CSS中的`@media`和`@import`规则上，也可以被用在HTML和XML中。通过这个标签属性，我们可以很方便的在不同的设备下实现丰富的界面，特别是移动设备，将会运用更加的广泛。

### media query能过获取的值
- 设备的宽和高device-width，device-heigth显示屏幕/触觉设备。
- 渲染窗口的宽和高width，heigth显示屏幕/触觉设备。
- 设备的手持方向，横向还是竖向orientation(portrait|lanscape)和打印机等。
- 画面比例aspect-ratio点阵打印机等。
- 设备比例device-aspect-ratio-点阵打印机等。
- 对象颜色或颜色列表color，color-index显示屏幕。
- 设备的分辨率resolution。

### 媒体查询然后加载相应地样式
#### HTML代码部分

    /*CSS属性判断可以是某个CSS属性的名称，也可以是属性+值：*/
    <link rel="stylesheet" media="screen and (animation)” herf=“…” >

#### CSS代码部分

    @media screen and (max-width:240px){
    	body{font-size:medium;}
    }

响应式布局是一种发展趋势，我这里仅仅是介绍了冰山一角，也许连冰山一角都算不上。当然这种方案只有在支持CSS3 media query属性的浏览器才能实现。所以在浏览器兼容性这方面还要花点时间，或许你听说过**优雅降级**对于不支持他的浏览器会表现得丑陋一点！关于兼容性这里不再赘述。有兴趣深入了解的希望与您进一步交流。    

##综述
文章对CSS布局比较流行的方法做了介绍，有严格按照像素来定位区域的固定宽度布局，有给用户更多自由的自适应布局，有秩序井然精度不减的网格布局以及在不同像素、不同客户端下浏览效果过硬的弹性布局，最后还介绍了风头正劲的响应式布局。各自的优缺点以及使用在文中也有了初步的介绍。现实中，其实很少碰到单一使用某一种布局方法的网站。布局并没有明显的界限，而是混合使用固定宽度、流式布局或弹性布局等。为用户提供最佳的方案。至于哪一种方法在何时使用则要靠经验的积累,相信在不断的学习中你也积累了不少经验吧。文中错误的地方提前感谢您指正。